/*!**********************************************************************************************************************
@file sam3u_i2c.h                                                                
@brief Header file for sam3u_TWI.c
**********************************************************************************************************************/

#ifndef __SAM3U_TWI_H
#define __SAM3U_TWI_H

#include "configuration.h"

/**********************************************************************************************************************
Type Definitions
**********************************************************************************************************************/



/**********************************************************************************************************************
Constants / Definitions
**********************************************************************************************************************/
/* TWI_u32Flags */
/* end of TWI_u32Flags */



/*! @cond DOXYGEN_EXCLUDE */
#define TWI_MMR_ADDRESS_SHIFT          (u8)0x10            /* Used with << to shift address to correct position in MMR */

/*! @endcond */



/**********************************************************************************************************************
* Function Declarations
**********************************************************************************************************************/

/*-------------------------------------------------------------------------------------------------------------------*/
/*! @publicsection */                                                                                            
/*-------------------------------------------------------------------------------------------------------------------*/
bool TwiReadData(u8 u8SlaveAddress_, u8* pu8RxBuffer_, u32 u32Size_);
u32 TwiWriteData(u8 u8SlaveAddress_, u32 u32Size_, u8* u8Data_, TwiStopType Send_);


/*-------------------------------------------------------------------------------------------------------------------*/
/*! @protectedsection */                                                                                            
/*-------------------------------------------------------------------------------------------------------------------*/
void TwiInitialize(void);
void TwiRunActiveState(void);
void TwiManualMode(void);

void TWI0_IrqHandler(void);


/*-------------------------------------------------------------------------------------------------------------------*/
/*! @privatesection */                                                                                            
/*-------------------------------------------------------------------------------------------------------------------*/


/***********************************************************************************************************************
State Machine Declarations
***********************************************************************************************************************/
static void TwiSM_Idle(void);

static void TwiSM_Transmit(void);
static void TwiSM_TxWaitComplete(void);

static void TwiSM_PdcReceive(void);
static void TwiSM_ReceiveLastByte(void);
static void TwiSM_ReceiveComplete(void);

static void TwiSM_NextTransferDelay(void);       

static void TwiSM_Error(void);         



#endif /* __SAM3U_TWI_H */


/*--------------------------------------------------------------------------------------------------------------------*/
/* End of File */
/*--------------------------------------------------------------------------------------------------------------------*/
